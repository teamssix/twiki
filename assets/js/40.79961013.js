(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{833:function(s,t,a){"use strict";a.r(t);var n=a(112),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("center",[a("h1",[s._v("Bucket ACL 可写")])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("列出目标 Bucket 提示被拒绝")]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"1000",src:"/img/1650006428.png"}}),a("br")]),s._v(" "),a("p",[s._v("查看目标 Bucket ACL 策略发现是可读的，且策略如下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("aws s3api get-bucket-acl --bucket teamssix\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"800",src:"/img/1650006456.png"}}),a("br")]),s._v(" "),a("p",[s._v("查询官方文档，内容如下：")]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"1200",src:"/img/1650006484.png"}}),a("br")]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"1200",src:"/img/1650006510.png"}}),a("br")]),s._v(" "),a("p",[s._v("通过官方文档，可以分析出这个策略表示任何人都可以访问、写入当前 Bucket 的 ACL")]),s._v(" "),a("p",[s._v("那么也就是说如果我们把权限修改为 FULL_CONTROL 后，就可以控制这个 Bucket 了，最后修改后的策略如下：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Owner"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ID"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d24***5"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Grants"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Grantee"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Group"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n                "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"URI"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://acs.amazonaws.com/groups/global/AllUsers"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Permission"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FULL_CONTROL"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("将该策略写入")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("aws s3api put-bucket-acl --bucket teamssix --access-control-policy file://acl.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"1000",src:"/img/1650006554.png"}}),a("br")]),s._v(" "),a("p",[s._v("再次尝试，发现就可以列出对象了")]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{width:"1000",src:"/img/1650006615.png"}}),a("br")]),s._v(" "),a("blockquote",[a("p",[s._v("参考资料：")]),s._v(" "),a("p",[s._v("https://mp.weixin.qq.com/s/eZ8OAO5ELgUNvVricIStGA")]),s._v(" "),a("p",[s._v("https://mp.weixin.qq.com/s/r0DuASP6gH_48b5sJ1DCTw")]),s._v(" "),a("p",[s._v("https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/userguide/acl-overview.html")])]),s._v(" "),a("Vssue")],1)}),[],!1,null,null,null);t.default=r.exports}}]);